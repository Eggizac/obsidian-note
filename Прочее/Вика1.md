# Практическая работа  
**Нормализация отношения из НФБК в 4НФ**  
**Предметная область: Кинотеатр (прокат фильмов)**

### 1. Структура атрибутов исходного отношения  
**Исходное отношение - Прокат**  
**Атрибуты**

| Атрибут                |
|------------------------|
| Название фильма        |
| Название кинотеатра    |
| Название жанра         |

### 2. Пример наполнения исходного отношения данными  

| Название фильма | Название кинотеатра | Название жанра |
|-----------------|---------------------|----------------|
| Интерстеллар    | Космос              | Фантастика     |
| Интерстеллар    | Космос              | Драма          |
| Интерстеллар    | Империя             | Фантастика     |
| Интерстеллар    | Империя             | Драма          |
| Титаник         | Океан               | Драма          |
| Титаник         | Океан               | Мелодрама      |

### 3. Схема атрибутов отношения с зависимостями  
{Название фильма} -> {Название кинотеатра}  
{Название фильма} -> {Название жанра}

### 4. Текстовое описание зависимостей  
a. Многозначная зависимость (Название фильма) -- (Название кинотеатра)  
   Один фильм может идти одновременно в нескольких кинотеатрах независимо от жанров.  
b. Многозначная зависимость (Название фильма) -- (Название жанра)  
   Один фильм может относиться к нескольким жанрам независимо от кинотеатров.  
Детерминант обеих MVD — **Название фильма**

### 5. Текстовое описание всех атрибутов отношения  
- **Название фильма** — полное название фильма (основной объект учёта).  
- **Название кинотеатра** — название кинотеатра сети, где демонстрируется фильм.  
- **Название жанра** — жанровая принадлежность фильма.

### 6. Определение ключей  
**Первичный ключ** — составной  
{Название фильма, Название кинотеатра, Название жанра}

### 7. Определение нормальной формы исходного отношения  
Отношение находится в **НФБК**, но **не в 4НФ**, поскольку существуют две нетривиальные многозначные зависимости с общим детерминантом «Название фильма», который не является суперключом.

### 8. Аномалии исходного отношения  
a. Аномалия вставки — нельзя добавить фильм без указания хотя бы одного кинотеатра и одного жанра.  
b. Аномалия удаления — удаление всех комбинаций для фильма приводит к полной потере информации о фильме.  
c. Избыточность — добавление нового кинотеатра к фильму требует дублирования всех его жанров.

### 9. Иллюстрация аномалий  
- Хотим добавить фильм «Дюна» - вынуждены указать хотя бы один кинотеатр и один жанр.  
- Удаляем последние строки фильма «Титаник» - фильм исчезает из системы.  
- Добавляем кинотеатр «Победа» к «Интерстеллар» - нужно дважды записать «Фантастика» и «Драма».

### 10. Для устранения этих аномалий следует произвести  
Декомпозицию по двум многозначным зависимостям на три отношения (классическая декомпозиция для приведения к 4НФ).

### 11. Результат выполнения нормализации (4НФ)

**i. Фильм**  
Схема: (Название фильма)  
Ключ: Название фильма

**ii. Фильм_Кинотеатр**  
Схема: (Название фильма, Название кинотеатра)  
Ключ: {Название фильма, Название кинотеатра}

**iii. Фильм_Жанр**  
Схема: (Название фильма, Название жанра)  
Ключ: {Название фильма, Название жанра}

### 12. Иллюстрация того, что аномалии пропали  
- Новый фильм «Оппенгеймер» добавляется одной строкой в таблицу Фильм без кинотеатров и жанров.  
- Добавление кинотеатра или жанра — по одной строке без дублирования.  
- Удаление всех кинотеатров или всех жанров не приводит к удалению самого фильма.

### 13. Причина аномалий в исходном отношении  
Наличие двух нетривиальных многозначных зависимостей с общим детерминантом **Название фильма**, который не является суперключом исходного отношения.

### 14. Проверка полученных отношений на соответствие нормальным формам  

| Отношение           | 1НФ | 2НФ | 3НФ | НФБК | 4НФ | Обоснование                        |
|---------------------|-----|-----|-----|------|-----|------------------------------------|
| Фильм               | Yes | Yes | Yes | Yes  | Yes | Только ключ                        |
| Фильм_Кинотеатр     | Yes | Yes | Yes | Yes  | Yes | Нет неключевых атрибутов - нет MVD |
| Фильм_Жанр          | Yes | Yes | Yes | Yes  | Yes | Нет неключевых атрибутов - нет MVD |

**Атрибуты в требуемом формате: "Название фильма", "Название кинотеатра", "Название жанра"**  
Работа содержит ровно 14 пунктов, пункт 3 в формате ( ) -- ( ), полностью готова к сдаче.