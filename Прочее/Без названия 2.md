# Практическая работа  
**Нормализация отношения из НФБК в 4НФ**  
*(по шаблону «Шаблон ответа на проект 2.1, 2.2, 2.3, 2.4 от 29-10-2025.docx» с дополнениями)*  
**Предметная область: Университет (расписание занятий)**

---

### 1. Структура атрибутов исходного отношения  
**Исходное отношение – Преподаватель_Группа**  
(получено после нормализации до НФБК)  
**Атрибуты**

| Атрибут |
|--------|
| Преподаватель |
| Группа |

---

### 2. Пример наполнения исходного отношения данными  

| Преподаватель | Группа |
|---------------|--------|
| Иванов        | Г1     |
| Иванов        | Г2     |
| Петров        | Г1     |
| Петров        | Г3     |

---

### 3. Схема атрибутов отношения с зависимостями  


---

### 4. Текстовое описание функциональных и многозначных зависимостей  
a. **Многозначная зависимость**: {Преподаватель} →→ {Группа}
i. Один преподаватель может вести занятия **в нескольких группах независимо**.  
**Детерминант – Преподаватель** (простой атрибут)  
b. **Нет функциональных зависимостей** (неключевых атрибутов нет).

---

### 5. Текстовое описание всех атрибутов отношения  
- **Преподаватель**: ФИО преподавателя (например, Иванов, Петров).  
- **Группа**: Уникальный идентификатор студенческой группы (например, Г1, Г2).

---

### 6. Определение ключей  
a. **Потенциальный ключ** – составной атрибут `{Преподаватель, Группа}`  
b. **Первичный ключ** – составной атрибут `{Преподаватель, Группа}`  
c. Нет неключевых атрибутов → все зависимости тривиальны.

---

### 7. Определение нормальной формы исходного отношения  
a. Исходное отношение находится в **НФБК**, потому что:  
- Все значения **атомарны** → **1НФ выполнена**  
- Ключ **составной**, но нет **частичных зависимостей** → **2НФ выполнена**  
- Нет **транзитивных зависимостей** → **3НФ выполнена**  
- Все **детерминанты функциональных зависимостей** являются **суперключами** (но ФЗ нет) → **НФБК выполнена**  
b. **Но не в 4НФ**, потому что:  
- Существует **нетривиальная многозначная зависимость** `{Преподаватель} →→ {Группа}`  
- Детерминант `Преподаватель` **не является суперключом** (не содержит полный ключ `{Преподаватель, Группа}`).

---

### 8. Аномалии исходного отношения  
a. **Аномалия вставки**: нельзя добавить нового преподавателя без указания хотя бы одной группы  
b. **Аномалия удаления**: при удалении всех групп преподавателя — теряется сам факт существования преподавателя  
c. **Аномалия обновления**: не применима, но **избыточность** при добавлении новых групп

---

### 9. Иллюстрация аномалий  
a. **Вставка**: Чтобы добавить преподавателя **Сидоров**, нужно **обязательно указать группу** (например, Г1).  
b. **Удаление**: Удаление всех строк с **Ивановым** → преподаватель **исчезает** из системы.  
c. **Избыточность**: Добавление новой группы **Г4** для Иванова — **дублирование** строки.

---

### 10. Для устранения этих аномалий с исходным отношением следует произвести  
a. **Декомпозицию по многозначной зависимости** `Преподаватель →→ Группа`, чтобы каждый детерминант MVD стал **суперключом** в своём отношении.

---

### 11. Результат выполнения нормализации (4НФ)  
a. После разложения получаем **три отношения**:

#### i. Преподаватель  
1. **Схема атрибутов**:  
`{Преподаватель}`  
2. **Потенциальным ключом** является **Преподаватель**

#### ii. Группа  
1. **Схема атрибутов**:  
`{Группа}`  
2. **Потенциальным ключом** является **Группа**

#### iii. Связь_Преподаватель_Группа  
1. **Схема атрибутов**:  
`{Преподаватель, Группа}`  
2. **Потенциальным ключом** является **составной ключ {Преподаватель, Группа}**

---

### 12. Иллюстрация того, что обозначенные выше аномалии в полученных отношениях пропали  
После декомпозиции:  
- **Вставка**: можно добавить преподавателя или группу **без связи** (вставка в `Преподаватель` или `Группа`).  
- **Удаление**: удаление всех связей **не удаляет** преподавателя или группу.  
- **Избыточность**: устранена — преподаватель и группа хранятся **по одному разу**, связи — в отдельной таблице.

---

### 13. Причина аномалий в исходном отношении  
**Причиной возникновения аномалий** является **нетривиальная многозначная зависимость** `{Преподаватель} →→ {Группа}`, где **детерминант не является суперключом**.

---

### 14. Проверка полученных отношений на соответствие нормальным формам  

| Отношение                                                 | 1НФ | 2НФ | 3НФ | НФБК | 4НФ | Обоснование                                         |
| --------------------------------------------------------- | --- | --- | --- | ---- | --- | --------------------------------------------------- |
| **Преподаватель**(`Преподаватель`)                        | Yes | Yes | Yes | Yes  | Yes | Только ключ. Нет зависимостей.                      |
| **Группа**(`Группа`)                                      | Yes | Yes | Yes | Yes  | Yes | Только ключ. Нет зависимостей.                      |
| **Связь_Преподаватель_Группа**(`Преподаватель`, `Группа`) | Yes | Yes | Yes | Yes  | Yes | Составной ключ. Нет неключевых атрибутов → нет MVD. |

---

## SQL-скрипт создания таблиц (4НФ)

```sql
-- 1. Преподаватель
CREATE TABLE Преподаватель (
    Преподаватель VARCHAR(50) NOT NULL,
    PRIMARY KEY (Преподаватель)
);

-- 2. Группа
CREATE TABLE Группа (
    Группа CHAR(2) NOT NULL,
    PRIMARY KEY (Группа)
);

-- 3. Связь_Преподаватель_Группа
CREATE TABLE Связь_Преподаватель_Группа (
    Преподаватель VARCHAR(50) NOT NULL,
    Группа        CHAR(2)     NOT NULL,
    PRIMARY KEY (Преподаватель, Группа),
    FOREIGN KEY (Преподаватель) REFERENCES Преподаватель(Преподаватель),
    FOREIGN KEY (Группа)        REFERENCES Группа(Группа)
);

-- Данные
INSERT INTO Преподаватель VALUES ('Иванов'), ('Петров');
INSERT INTO Группа VALUES ('Г1'), ('Г2'), ('Г3');

INSERT INTO Связь_Преподаватель_Группа VALUES 
('Иванов', 'Г1'),
('Иванов', 'Г2'),
('Петров', 'Г1'),
('Петров', 'Г3');