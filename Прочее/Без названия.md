
---

### 4. Текстовое описание функциональных зависимостей  
a. `{Код поставщика} → {Название поставщика, Город}`  
i. По коду поставщика можно определить его название и город. **Детерминант – Код поставщика**  
b. `{Код поставки} → {Код поставщика, Код продукции, Количество}`  
i. По коду поставки можно определить поставщика, продукцию и количество. **Детерминант – Код поставки**

---

### 5. Определение ключей  
a. **Потенциальный ключ** – Код поставки  
b. **Первичный ключ** – Код поставки  
c. Остальные атрибуты функционально зависят от него.

---

### 6. Определение нормальной формы исходного отношения  
a. Исходное отношение находится в **2-й нормальной форме (2НФ)**, так как:  
- Все значения **атомарны** → **1НФ выполнена**  
- Ключ **простой** → **нет частичных зависимостей** → **2НФ выполнена**  
- **Но есть транзитивная зависимость**:  
  - `Код поставки → Код поставщика → Название поставщика, Город`  
→ **не 3НФ**

---

### 7. Аномалии исходного отношения  
a. **Аномалия вставки**: нельзя добавить нового поставщика без создания поставки  
b. **Аномалия удаления**: при удалении всех поставок поставщика — теряется его название и город  
c. **Аномалия обновления**: при смене города поставщика — нужно обновлять **все строки** с этим поставщиком

---

### 8. Иллюстрация аномалий  
a. Если удалить поставки 001 и 002 — информация о поставщике **P001**, названии **«МеталлПром»** и городе **«Москва»** исчезнет.  
b. Если поставщик `P001` переедет в **Тулу** — нужно обновить **все строки** с `Код поставщика = P001`.

---

### 9. Для устранения этих аномалий с исходным отношением следует произвести  
a. Разделить исходное отношение на **два отношения**, чтобы устранить **транзитивные зависимости**.

---

### 10. Результат выполнения нормализации (3НФ)  
a. После разложения получаем **два отношения**:

#### i. Поставщик  
1. **Схема атрибутов**:  
`{Код поставщика} → {Название поставщика, Город}`  
2. **Потенциальным ключом** является **Код поставщика**

#### ii. Поставка  
1. **Схема атрибутов**:  
`{Код поставки} → {Код поставщика, Код продукции, Количество}`  
2. **Потенциальным ключом** является **Код поставки**

---

### 11. Иллюстрация того, что обозначенные выше аномалии в полученных отношениях пропали  
После нормализации данные разделены на два отношения (**Поставщик**, **Поставка**), и все аномалии исчезли:  
a. **Аномалия вставки**: можно добавить поставщика **без поставки**  
b. **Аномалия удаления**: удаление поставки **не удаляет** поставщика  
c. **Аномалия обновления**: смена города — **одно обновление** в таблице `Поставщик`

---

### 12. Иллюстрация устранения аномалий  
Причиной аномалий была **транзитивная зависимость**:  
- `Название поставщика`, `Город` зависели **не от `Код поставки`**, а от `Код поставщика`  
Это вызывало **избыточность** и **аномалии**.  
**Решение**: вынос в отдельную таблицу → **3НФ**

---

### 13. Проверка полученных отношений на соответствие нормальным формам  

| Отношение                                                                     | 1НФ | 2НФ | 3НФ | Обоснование                                                                                     |     |
| ----------------------------------------------------------------------------- | --- | --- | --- | ----------------------------------------------------------------------------------------------- | --- |
| **Поставщик**(`Код поставщика`, `Название поставщика`, `Город`)               | Yes | Yes | Yes | Ключ простой. Все неключевые атрибуты зависят **непосредственно** от ключа. Нет транзитивности. |     |
| **Поставка**(`Код поставки`, `Код поставщика`, `Код продукции`, `Количество`) | Yes | Yes | Yes | Ключ простой. Все неключевые атрибуты зависят **от всего ключа**. Нет транзитивности.           |     |

---

11. Иллюстрация того, что обозначенные выше аномалии в полученных отношениях пропали После нормализации данные разделены на три отношения (**Поставщик**, **Продукция**, **Поставка**), и все аномалии исчезли: a. **Аномалия вставки**: можно добавить поставщика или продукцию **без поставки** b. **Аномалия удаления**: удаление поставки **не удаляет** поставщика или продукцию c. **Аномалия обновления**: смена названия — **одно обновление** в соответствующей таблице
## SQL-скрипт создания таблиц (3НФ)

```sql
-- 1. Поставщик
CREATE TABLE Поставщик (
    Код_поставщика      CHAR(4)      NOT NULL,
    Название_поставщика VARCHAR(100) NOT NULL,
    Город               VARCHAR(50)  NOT NULL,
    PRIMARY KEY (Код_поставщика)
);

-- 2. Поставка
CREATE TABLE Поставка (
    Код_поставки        CHAR(3)      NOT NULL,
    Код_поставщика      CHAR(4)      NOT NULL,
    Код_продукции       CHAR(4)      NOT NULL,
    Количество          INT          NOT NULL,
    PRIMARY KEY (Код_поставки),
    FOREIGN KEY (Код_поставщика) REFERENCES Поставщик(Код_поставщика)
);

-- Данные
INSERT INTO Поставщик VALUES 
('P001', 'МеталлПром', 'Москва'),
('P002', 'СтальИнвест', 'Питер');

INSERT INTO Поставка VALUES 
('001', 'P001', 'PR01', 1000),
('002', 'P001', 'PR02', 1200),
('003', 'P002', 'PR03', 800),
('004', 'P002', 'PR04', 600